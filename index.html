<!DOCTYPE html>
<!-- Author: Matthew Richardson -->
<html>
<head>
	<title>Number Space</title>
	<script src="ns_polygons.js"></script>
	<script src="ns_functions.js"></script>
	<script>

		function onLoad() {

			const canvas = document.getElementById("ns_canvas");
			const context = canvas.getContext("2d");

			canvas.width = innerWidth;
			canvas.height = innerHeight;

			let mouseX = canvas.width / 2;
			let mouseY = canvas.height / 2;

			canvas.onmousemove = function(event) {
				mouseX = event.clientX;
				mouseY = event.clientY;
			};

			let tile1 = createTile(context, "green", { fillStyle: "black", verts: digit1 });
			let tile4 = createTile(context, "red", { fillStyle: "black", verts: digit4 });
			let tile7 = createTile(context, "lightsteelblue", { fillStyle: "black", verts: digit7 });
			tile1.linkTo(tile4, getOri(0), getDir(0), true);
			tile1.linkTo(tile7, getOri(0), getDir(2), true);
			tile4.linkTo(tile7, getOri(6), getDir(2), true);
			tile7.linkTo(tile1, getOri(0), getDir(2), false);
			//tile1.linkTo(tile7, getOri(0), getDir(3), false);

			let origin = { x: 0, y: 0 };
			let xAxis = { p1: origin, p2: { x: 1, y: 0 } };
			let yAxis = { p1: origin, p2: { x: 0, y: 1 } };
			let sl = 100;

			// drawTileTree: (walk, tlx, tly, left, right, depth)
			function drawTileTree(walk, tlx, tly, left, right, depth) {
				let tile = walk.currTile();
				let orient = walk.currOri();
				tile.draw(tlx, tly, left, right, sl, orient);
				walk.to(getDir(0));
				if (depth > 0 && walk.canContinue()) {
					drawTileTree(walk, tlx + sl, tly, { p1: origin, p2: { x: tlx + sl, y: tly + sl } }, right, depth - 1);
				}
				walk.jumpTo(tile, orient);
				walk.to(getDir(2));
				if (depth > 0 && walk.canContinue()) {
					drawTileTree(walk, tlx, tly + sl, left, { p1: origin, p2: { x: tlx + sl, y: tly + sl } }, depth - 1);
				}
			}

			function drawScene() {
				let walk = startWalk(tile1, getOri(0));
				drawTileTree(walk, 0, 0, yAxis, xAxis, 10);
			}

			(function animate() {
				context.clearRect(0, 0, canvas.width, canvas.height)
				drawScene();
				// requestAnimationFrame(animate);
			})();

		}

	</script>
</head>
<body onload="onLoad()">
	<canvas id="ns_canvas"></canvas>
	<style>
		* {
			margin: 0;
			padding: 0;
		}
	</style>
</body> 
</html>
